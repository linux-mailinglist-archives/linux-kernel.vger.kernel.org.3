Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 70E6A4A6ED1
	for <lists+linux-kernel@lfdr.de>; Wed,  2 Feb 2022 11:35:45 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S1343549AbiBBKfl (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Wed, 2 Feb 2022 05:35:41 -0500
Received: from smtp-out2.suse.de ([195.135.220.29]:36448 "EHLO
        smtp-out2.suse.de" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S1343570AbiBBKfe (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Wed, 2 Feb 2022 05:35:34 -0500
Received: from relay2.suse.de (relay2.suse.de [149.44.160.134])
        by smtp-out2.suse.de (Postfix) with ESMTP id 6D8171F397;
        Wed,  2 Feb 2022 10:35:33 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
        t=1643798133; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
         mime-version:mime-version:content-type:content-type:
         in-reply-to:in-reply-to:references:references;
        bh=C2pCrfmflB3CzlOnQp3+cEjQhld6V5JXc/sVQFZlOyo=;
        b=JAGTqn0YwPNrhQZtBF0ZGRzg6NxGlaMzWnwv3ZfwojARt6FzhC4b3AHl74axVgXT2gvTGG
        rJWx+hyQFTDZh3Y0Cvl97ndeg1pAUc1ZfMFXAc3RGIc9oIhLeCOLw10RrgyfLUpIufgVxT
        CZZp6HtxsNq2Pz/x2VIHxFlYVuwapwY=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
        s=susede2_ed25519; t=1643798133;
        h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
         mime-version:mime-version:content-type:content-type:
         in-reply-to:in-reply-to:references:references;
        bh=C2pCrfmflB3CzlOnQp3+cEjQhld6V5JXc/sVQFZlOyo=;
        b=paMEEug6h9dXdXqNOI6eIXWlI9COMbUjK5LFZkpH4+FQhdejS10PbmYrBGScSvvS6wO01Y
        Uy7b+o0D9BJl/SDA==
Received: from alsa1.suse.de (alsa1.suse.de [10.160.4.42])
        by relay2.suse.de (Postfix) with ESMTP id 404A4A3B88;
        Wed,  2 Feb 2022 10:35:33 +0000 (UTC)
Date:   Wed, 02 Feb 2022 11:35:33 +0100
Message-ID: <s5hleytzhca.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Arnaldo Carvalho de Melo <acme@kernel.org>
Cc:     Takashi Iwai <tiwai@suse.de>, Mark Brown <broonie@kernel.org>,
        Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>,
        Takashi Sakamoto <o-takashi@sakamocchi.jp>,
        Linux Kernel Mailing List <linux-kernel@vger.kernel.org>
Subject: Re: [PATCH 1/1 fyi] tools include UAPI: Sync sound/asound.h copy with the kernel sources
In-Reply-To: <YflN0j09T+6ODHIh@kernel.org>
References: <YflN0j09T+6ODHIh@kernel.org>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Tue, 01 Feb 2022 16:12:18 +0100,
Arnaldo Carvalho de Melo wrote:
> 
> Picking the changes from:
> 
>   55b71f6c29f2a78a ("ALSA: uapi: use C90 comment style instead of C99 style")
>   fb6723daf89083a0 ("ALSA: pcm: comment about relation between msbits hw parameter and [S|U]32 formats")
>   b456abe63f60ad93 ("ALSA: pcm: introduce INFO_NO_REWINDS flag")
>   5aec579e08e4f2be ("ALSA: uapi: Fix a C++ style comment in asound.h")
> 
> Which entails no changes in the tooling side as it doesn't introduce new
> SNDRV_PCM_IOCTL_ ioctls.
> 
> To silence this perf tools build warning:
> 
>   Warning: Kernel ABI header at 'tools/include/uapi/sound/asound.h' differs from latest version at 'include/uapi/sound/asound.h'
>   diff -u tools/include/uapi/sound/asound.h include/uapi/sound/asound.h
> 
> Cc: Mark Brown <broonie@kernel.org>
> Cc: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>
> Cc: Takashi Iwai <tiwai@suse.de>
> Cc: Takashi Sakamoto <o-takashi@sakamocchi.jp>
> Signed-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>

Thanks for the patch.
Shall I merge this through sound git tree or was already merged in
somewhere else?


Takashi

> ---
>  tools/include/uapi/sound/asound.h | 7 ++++++-
>  1 file changed, 6 insertions(+), 1 deletion(-)
> 
> diff --git a/tools/include/uapi/sound/asound.h b/tools/include/uapi/sound/asound.h
> index 5fbb79e30819af91..ef0cafe295b28253 100644
> --- a/tools/include/uapi/sound/asound.h
> +++ b/tools/include/uapi/sound/asound.h
> @@ -202,6 +202,11 @@ typedef int __bitwise snd_pcm_format_t;
>  #define	SNDRV_PCM_FORMAT_S24_BE	((__force snd_pcm_format_t) 7) /* low three bytes */
>  #define	SNDRV_PCM_FORMAT_U24_LE	((__force snd_pcm_format_t) 8) /* low three bytes */
>  #define	SNDRV_PCM_FORMAT_U24_BE	((__force snd_pcm_format_t) 9) /* low three bytes */
> +/*
> + * For S32/U32 formats, 'msbits' hardware parameter is often used to deliver information about the
> + * available bit count in most significant bit. It's for the case of so-called 'left-justified' or
> + * `right-padding` sample which has less width than 32 bit.
> + */
>  #define	SNDRV_PCM_FORMAT_S32_LE	((__force snd_pcm_format_t) 10)
>  #define	SNDRV_PCM_FORMAT_S32_BE	((__force snd_pcm_format_t) 11)
>  #define	SNDRV_PCM_FORMAT_U32_LE	((__force snd_pcm_format_t) 12)
> @@ -300,7 +305,7 @@ typedef int __bitwise snd_pcm_subformat_t;
>  #define SNDRV_PCM_INFO_HAS_LINK_ESTIMATED_ATIME    0x04000000  /* report estimated link audio time */
>  #define SNDRV_PCM_INFO_HAS_LINK_SYNCHRONIZED_ATIME 0x08000000  /* report synchronized audio/system time */
>  #define SNDRV_PCM_INFO_EXPLICIT_SYNC	0x10000000	/* needs explicit sync of pointers and data */
> -
> +#define SNDRV_PCM_INFO_NO_REWINDS	0x20000000	/* hardware can only support monotonic changes of appl_ptr */
>  #define SNDRV_PCM_INFO_DRAIN_TRIGGER	0x40000000		/* internal kernel flag - trigger in drain */
>  #define SNDRV_PCM_INFO_FIFO_IN_FRAMES	0x80000000	/* internal kernel flag - FIFO size is in frames */
>  
> -- 
> 2.34.1
> 
