Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id 201764CFE39
	for <lists+linux-kernel@lfdr.de>; Mon,  7 Mar 2022 13:24:06 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S242218AbiCGMYo (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Mon, 7 Mar 2022 07:24:44 -0500
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:51862 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S242225AbiCGMYX (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Mon, 7 Mar 2022 07:24:23 -0500
Received: from ams.source.kernel.org (ams.source.kernel.org [145.40.68.75])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id 0300763EF
        for <linux-kernel@vger.kernel.org>; Mon,  7 Mar 2022 04:23:27 -0800 (PST)
Received: from smtp.kernel.org (relay.kernel.org [52.25.139.140])
        (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
        (No client certificate requested)
        by ams.source.kernel.org (Postfix) with ESMTPS id 6BDA7B811B8
        for <linux-kernel@vger.kernel.org>; Mon,  7 Mar 2022 12:23:26 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id 05B09C340F5;
        Mon,  7 Mar 2022 12:23:25 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
        s=k20201202; t=1646655805;
        bh=4FU9MVXnmckZgKV5S9qqzP2l0zaOcBmfWx7Vs1t8lqI=;
        h=Date:From:To:Cc:Subject:In-Reply-To:References:From;
        b=FEyVbZ3OMoFOMHm9xiM2pbQmIdXKk8PQB+ppsCAu2MUeqmRpvHUqFoU/CLCEYw7zR
         IW187SpKnAxUn/r0+sVcC5P3uqJb8IupAzV2EChROuAsqQmZJTi1s+h+ctBvpcsISR
         j6E5jRMUTvxdZSsCZNXhABPUzEp4RNauUWVoW7vhkF5FC5JqoRY3mwkZU8c4GexMYD
         ffbgyPgcFja6Zjep/wIoV2XGW/gynERjEL2UT/BMc9avTRtDttOlYGmrHAFRTN2W0Q
         2D/60vehzS3COdMqIGoQe8wAS4ZBha4eTi1N1HXoilcsq4UuQWqHu/m1ayNRLSr1Sx
         9IjrrmlIU4PgQ==
Received: from sofa.misterjones.org ([185.219.108.64] helo=why.misterjones.org)
        by disco-boy.misterjones.org with esmtpsa  (TLS1.3) tls TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
        (Exim 4.94.2)
        (envelope-from <maz@kernel.org>)
        id 1nRCOW-00CmSd-DG; Mon, 07 Mar 2022 12:23:21 +0000
Date:   Mon, 07 Mar 2022 12:23:20 +0000
Message-ID: <87bkyi0x53.wl-maz@kernel.org>
From:   Marc Zyngier <maz@kernel.org>
To:     Rongwei Wang <rongwei.wang@linux.alibaba.com>
Cc:     catalin.marinas@arm.com, will@kernel.org, joey.gouly@arm.com,
        mark.rutland@arm.com, akpm@linux-foundation.org,
        linux-arm-kernel@lists.infradead.org, linux-kernel@vger.kernel.org
Subject: Re: [PATCH RFC] arm64: improve display about CPU architecture in cpuinfo
In-Reply-To: <a31431bf-24bb-71ac-8f3c-f9ca19f5c4f0@linux.alibaba.com>
References: <20220307030417.22974-1-rongwei.wang@linux.alibaba.com>
        <87h78a178u.wl-maz@kernel.org>
        <a31431bf-24bb-71ac-8f3c-f9ca19f5c4f0@linux.alibaba.com>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL-LB/10.8 EasyPG/1.0.0 Emacs/27.1
 (x86_64-pc-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
Content-Type: text/plain; charset=US-ASCII
X-SA-Exim-Connect-IP: 185.219.108.64
X-SA-Exim-Rcpt-To: rongwei.wang@linux.alibaba.com, catalin.marinas@arm.com, will@kernel.org, joey.gouly@arm.com, mark.rutland@arm.com, akpm@linux-foundation.org, linux-arm-kernel@lists.infradead.org, linux-kernel@vger.kernel.org
X-SA-Exim-Mail-From: maz@kernel.org
X-SA-Exim-Scanned: No (on disco-boy.misterjones.org); SAEximRunCond expanded to false
X-Spam-Status: No, score=-7.6 required=5.0 tests=BAYES_00,DKIMWL_WL_HIGH,
        DKIM_SIGNED,DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_HI,
        SPF_HELO_NONE,SPF_PASS,T_SCC_BODY_TEXT_LINE autolearn=ham
        autolearn_force=no version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Mon, 07 Mar 2022 12:13:50 +0000,
Rongwei Wang <rongwei.wang@linux.alibaba.com> wrote:
> 
> 
> 
> On 3/7/22 4:45 PM, Marc Zyngier wrote:
> > On Mon, 07 Mar 2022 03:04:17 +0000,
> > Rongwei Wang <rongwei.wang@linux.alibaba.com> wrote:
> >> 
> >> Now, it is unsuitable for both ARMv8 and ARMv9 to show a
> >> fixed string "CPU architecture: 8" in /proc/cpuinfo.
> > 
> > Please read the various threads that have been going on over the past
> > 10+ years about *why* we don't allow this sort of change (TL;DR: it
> > breaks userspace, and we don't do that).
> > 
> > Also, there is no material difference between v8 and v9 that would be
> > observable from userspace outside of the "Features:" line. And if that
> > doesn't convince you, just think of '8' as the number of bytes
> > used by

> I got your point. It seems that we can regard '8' as the number of
> bytes. But what make me do this is that 'CPU architecture: 8' is
> confusing, especially those responsible for testing.
> And I believe that most people regard this '8' as ARMv8, maybe not.

That was the original intention. But given that there is no userspace
visible difference between v8, v9 and  whatever comes after it, this
is a pointless change. My comment about the size of a VA was just a
joke, and not something to be taken seriously.

> In fact, I'm not sure it has potential ABI implications, so seek your
> advice.

Plenty of userspace programs parse /proc/cpuinfo. If you replace '8'
with anything else, they will fail. Which is why although your patch
makes sense, it comes 10 years too late, and we can't change this
anymore.

Thanks,

	M.

-- 
Without deviation from the norm, progress is not possible.
