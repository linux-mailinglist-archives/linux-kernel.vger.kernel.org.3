Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from vger.kernel.org (vger.kernel.org [23.128.96.18])
	by mail.lfdr.de (Postfix) with ESMTP id C6288481A88
	for <lists+linux-kernel@lfdr.de>; Thu, 30 Dec 2021 08:56:22 +0100 (CET)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S237258AbhL3H4M (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Thu, 30 Dec 2021 02:56:12 -0500
Received: from smtp-out1.suse.de ([195.135.220.28]:60898 "EHLO
        smtp-out1.suse.de" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S231688AbhL3H4L (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 30 Dec 2021 02:56:11 -0500
Received: from relay2.suse.de (relay2.suse.de [149.44.160.134])
        by smtp-out1.suse.de (Postfix) with ESMTP id 67D1521101;
        Thu, 30 Dec 2021 07:56:10 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
        t=1640850970; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
         mime-version:mime-version:content-type:content-type:
         in-reply-to:in-reply-to:references:references;
        bh=kI7RlWLKZBCoBup3xYfD4BIj34mO5ObvZ9FFVtwc2vk=;
        b=WS6riKN9Ce9vp1a9wPM43nRs3Epgu1P4FyQYwJusNDfpAOQEDy9XrpU3P3edkhcEln6pY6
        dfueKrzCxF/4ByAAHGFQ6EJoxHCcphMtNd+RYidYQOMd+dxjQtjTB9MB8l3nwqkLYyxh4L
        IKnFnOXEheZRjk87t1j89VEBD9hIVmg=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
        s=susede2_ed25519; t=1640850970;
        h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
         mime-version:mime-version:content-type:content-type:
         in-reply-to:in-reply-to:references:references;
        bh=kI7RlWLKZBCoBup3xYfD4BIj34mO5ObvZ9FFVtwc2vk=;
        b=XQvTABy7og8MR8VZUSHa1gslDxRIhKPEqv9KJhc9YanhMDAcOV5CGDEHIhmIY0ViMWsbLo
        kGwDOiPqO2/wabDQ==
Received: from alsa1.suse.de (alsa1.suse.de [10.160.4.42])
        by relay2.suse.de (Postfix) with ESMTP id 7E46BA3B84;
        Thu, 30 Dec 2021 07:56:09 +0000 (UTC)
Date:   Thu, 30 Dec 2021 08:56:09 +0100
Message-ID: <s5hwnjmo7ae.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Rouven Czerwinski <rouven@czerwinskis.de>
Cc:     Jaroslav Kysela <perex@perex.cz>, Takashi Iwai <tiwai@suse.com>,
        alsa-devel@alsa-project.org, linux-kernel@vger.kernel.org,
        Simeon Simeonoff <sim.simeonoff@gmail.com>,
        Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>,
        Colin Ian King <colin.king@intel.com>
Subject: Re: IOMMU Page Fault with Creative Soundblaster Zx after suspend
In-Reply-To: <87mtkjqvgj.fsf@czerwinskis.de>
References: <87mtkjqvgj.fsf@czerwinskis.de>
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

On Wed, 29 Dec 2021 16:24:13 +0100,
Rouven Czerwinski wrote:
> 
> Hi,
> 
> With current 5.15.11, my soundblaster Zx is not correctly coming back
> from suspend. Dmesg prints:
> 
> [Mi Dez 29 16:12:14 2021] [drm] UVD and UVD ENC initialized successfully.
> [Mi Dez 29 16:12:14 2021] snd_hda_codec_ca0132 hdaudioC0D1: ca0132 DSP downloaded and running
> [Mi Dez 29 16:12:15 2021] [drm] VCE initialized successfully.
> [Mi Dez 29 16:12:15 2021] usb 1-5: reset full-speed USB device number 2 using xhci_hcd
> [Mi Dez 29 16:12:16 2021] ata1.00: Enabling discard_zeroes_data
> [Mi Dez 29 16:12:16 2021] OOM killer enabled.
> [Mi Dez 29 16:12:16 2021] Restarting tasks ... done.
> [Mi Dez 29 16:12:16 2021] PM: suspend exit
> [Mi Dez 29 16:12:16 2021] snd_hda_intel 0000:06:00.0: AMD-Vi: Event logged [IO_PAGE_FAULT domain=0x000f address=0xdf880000 flags=0x0000]
> [Mi Dez 29 16:12:17 2021] igb 0000:08:00.0 enp8s0: igb: enp8s0 NIC Link is Up 1000 Mbps Full Duplex, Flow Control: RX/TX
> 
> Where the IOMMU Page Fault looks suspicious. Unbinding and rebinding the
> driver using sysfs fixes it, thats the current workaround I have
> been using.

Is it a regression from the earlier releases?  If yes, please try to
narrow down the regression range, at least, which version started
showing the problem.  It'd be great if you can perform git bisection,
of course.


thanks,

Takashi
