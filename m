Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id D27B950088D
	for <lists+linux-kernel@lfdr.de>; Thu, 14 Apr 2022 10:41:14 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S241096AbiDNImZ (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Thu, 14 Apr 2022 04:42:25 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:46136 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S241028AbiDNIlv (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Thu, 14 Apr 2022 04:41:51 -0400
Received: from smtp-out2.suse.de (smtp-out2.suse.de [195.135.220.29])
        by lindbergh.monkeyblade.net (Postfix) with ESMTPS id A42C92BA
        for <linux-kernel@vger.kernel.org>; Thu, 14 Apr 2022 01:39:20 -0700 (PDT)
Received: from relay2.suse.de (relay2.suse.de [149.44.160.134])
        by smtp-out2.suse.de (Postfix) with ESMTP id 087361F747;
        Thu, 14 Apr 2022 08:39:19 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=suse.de; s=susede2_rsa;
        t=1649925559; h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
         mime-version:mime-version:content-type:content-type;
        bh=uErXGT94lzjaW6470zjLwKuokbUb5+yISqq1DdTGlSw=;
        b=XJlwhCqVQa9Jm3hvHg3y2b9K7zphNFo8TtJ+2xVT7O8+GsHoa8Uj+epCLq2hy2q6XD0a1a
        ZWPTVF2ZR0QfqjLbGP+I2a5zg2BpE5VRcwjw4YINrypRWpmlBdQtDb+m8neB43vSEteTpM
        ycYDgUCWrq+MagbYMPUBTYFN6V5FOd0=
DKIM-Signature: v=1; a=ed25519-sha256; c=relaxed/relaxed; d=suse.de;
        s=susede2_ed25519; t=1649925559;
        h=from:from:reply-to:date:date:message-id:message-id:to:to:cc:cc:
         mime-version:mime-version:content-type:content-type;
        bh=uErXGT94lzjaW6470zjLwKuokbUb5+yISqq1DdTGlSw=;
        b=bBPJS5diDJyN6A04YMy+1IMkhnMCvIYoWl5Ad74bBQlkes9JvFlejhTSjdDWGJokeHuHvR
        Ti3em3UrtF+bpJBQ==
Received: from alsa1.suse.de (alsa1.suse.de [10.160.4.42])
        by relay2.suse.de (Postfix) with ESMTP id 027C5A3B82;
        Thu, 14 Apr 2022 08:39:18 +0000 (UTC)
Date:   Thu, 14 Apr 2022 10:39:18 +0200
Message-ID: <s5hv8vc3vpl.wl-tiwai@suse.de>
From:   Takashi Iwai <tiwai@suse.de>
To:     Linus Torvalds <torvalds@linux-foundation.org>
Cc:     Linux Kernel Mailing List <linux-kernel@vger.kernel.org>
Subject: [GIT PULL] sound fixes for 5.18-rc3
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI/1.14.6 (Maruoka)
 FLIM/1.14.9 (=?UTF-8?B?R29qxY0=?=) APEL/10.8 Emacs/25.3
 (x86_64-suse-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI 1.14.6 - "Maruoka")
Content-Type: text/plain; charset=US-ASCII
X-Spam-Status: No, score=-4.4 required=5.0 tests=BAYES_00,DKIM_SIGNED,
        DKIM_VALID,DKIM_VALID_AU,DKIM_VALID_EF,RCVD_IN_DNSWL_MED,SPF_HELO_NONE,
        SPF_PASS,T_SCC_BODY_TEXT_LINE autolearn=ham autolearn_force=no
        version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Linus,

please pull sound fixes for v5.18-rc3 from:

  git://git.kernel.org/pub/scm/linux/kernel/git/tiwai/sound.git tags/sound-5.18-rc3

The topmost commit is 24d0c9f0e7de95fe3e3e0067cbea1cd5d413244b

----------------------------------------------------------------

sound fixes for 5.18-rc3

This became an unexpectedly large pull request due to various
regression fixes in the previous kernels.

The majority of fixes are a series of patches to address the
regression at probe errors in devres'ed drivers, while there are
yet more fixes for the x86 SG allocations and for USB-audio
buffer management.  In addition, a few HD-audio quirks and other
small fixes are found.

----------------------------------------------------------------

Borislav Petkov (1):
      ALSA: usb-audio: Fix undefined behavior due to shift overflowing the constant

Fabio M. De Francesco (1):
      ALSA: pcm: Test for "silence" field in struct "pcm_format_data"

Kai Vehmanen (1):
      ALSA: hda/i915 - skip acomp init if no matching display

Pierre-Louis Bossart (1):
      ALSA: hda: intel-dsp-config: update AlderLake PCI IDs

Randy Dunlap (1):
      sound/oss/dmasound: fix build when drivers are mixed =y/=m

Takashi Iwai (45):
      ALSA: usb-audio: Cap upper limits of buffer/period bytes for implicit fb
      ALSA: usb-audio: Increase max buffer size
      ALSA: core: Add snd_card_free_on_error() helper
      ALSA: echoaudio: Fix the missing snd_card_free() call at probe error
      ALSA: galaxy: Fix the missing snd_card_free() call at probe error
      ALSA: sc6000: Fix the missing snd_card_free() call at probe error
      ALSA: ad1889: Fix the missing snd_card_free() call at probe error
      ALSA: ali5451: Fix the missing snd_card_free() call at probe error
      ALSA: als4000: Fix the missing snd_card_free() call at probe error
      ALSA: atiixp: Fix the missing snd_card_free() call at probe error
      ALSA: au88x0: Fix the missing snd_card_free() call at probe error
      ALSA: azt3328: Fix the missing snd_card_free() call at probe error
      ALSA: ca0106: Fix the missing snd_card_free() call at probe error
      ALSA: cs4281: Fix the missing snd_card_free() call at probe error
      ALSA: cs5535audio: Fix the missing snd_card_free() call at probe error
      ALSA: emu10k1x: Fix the missing snd_card_free() call at probe error
      ALSA: ens137x: Fix the missing snd_card_free() call at probe error
      ALSA: es1938: Fix the missing snd_card_free() call at probe error
      ALSA: es1968: Fix the missing snd_card_free() call at probe error
      ALSA: fm801: Fix the missing snd_card_free() call at probe error
      ALSA: ice1724: Fix the missing snd_card_free() call at probe error
      ALSA: intel8x0: Fix the missing snd_card_free() call at probe error
      ALSA: korg1212: Fix the missing snd_card_free() call at probe error
      ALSA: maestro3: Fix the missing snd_card_free() call at probe error
      ALSA: riptide: Fix the missing snd_card_free() call at probe error
      ALSA: rme32: Fix the missing snd_card_free() call at probe error
      ALSA: rme96: Fix the missing snd_card_free() call at probe error
      ALSA: sonicvibes: Fix the missing snd_card_free() call at probe error
      ALSA: via82xx: Fix the missing snd_card_free() call at probe error
      ALSA: intel_hdmi: Fix the missing snd_card_free() call at probe error
      ALSA: sis7019: Fix the missing error handling
      ALSA: bt87x: Fix the missing snd_card_free() call at probe error
      ALSA: lola: Fix the missing snd_card_free() call at probe error
      ALSA: als300: Fix the missing snd_card_free() call at probe error
      ALSA: aw2: Fix the missing snd_card_free() call at probe error
      ALSA: cmipci: Fix the missing snd_card_free() call at probe error
      ALSA: lx6464es: Fix the missing snd_card_free() call at probe error
      ALSA: oxygen: Fix the missing snd_card_free() call at probe error
      ALSA: hdsp: Fix the missing snd_card_free() call at probe error
      ALSA: hdspm: Fix the missing snd_card_free() call at probe error
      ALSA: rme9652: Fix the missing snd_card_free() call at probe error
      ALSA: mtpav: Don't call card private_free at probe error path
      ALSA: nm256: Don't call card private_free at probe error path
      ALSA: memalloc: Add fallback SG-buffer allocations for x86
      ALSA: usb-audio: Limit max buffer and period sizes per time

Tao Jin (1):
      ALSA: hda/realtek: add quirk for Lenovo Thinkpad X12 speakers

Tim Crawford (1):
      ALSA: hda/realtek: Add quirk for Clevo PD50PNT

---
 include/sound/core.h                |   1 +
 include/sound/memalloc.h            |   5 ++
 sound/core/init.c                   |  28 +++++++++
 sound/core/memalloc.c               | 111 +++++++++++++++++++++++++++++++++++-
 sound/core/pcm_misc.c               |   2 +-
 sound/drivers/mtpav.c               |   4 +-
 sound/hda/hdac_i915.c               |  29 ++++++----
 sound/hda/intel-dsp-config.c        |  18 +++++-
 sound/isa/galaxy/galaxy.c           |   7 ++-
 sound/isa/sc6000.c                  |   7 ++-
 sound/oss/dmasound/dmasound.h       |   6 --
 sound/oss/dmasound/dmasound_core.c  |  24 +-------
 sound/pci/ad1889.c                  |  10 +++-
 sound/pci/ali5451/ali5451.c         |  10 +++-
 sound/pci/als300.c                  |   8 ++-
 sound/pci/als4000.c                 |  10 +++-
 sound/pci/atiixp.c                  |  10 +++-
 sound/pci/atiixp_modem.c            |  10 +++-
 sound/pci/au88x0/au88x0.c           |   8 ++-
 sound/pci/aw2/aw2-alsa.c            |   8 ++-
 sound/pci/azt3328.c                 |   8 ++-
 sound/pci/bt87x.c                   |  10 +++-
 sound/pci/ca0106/ca0106_main.c      |  10 +++-
 sound/pci/cmipci.c                  |   8 ++-
 sound/pci/cs4281.c                  |  10 +++-
 sound/pci/cs5535audio/cs5535audio.c |  10 +++-
 sound/pci/echoaudio/echoaudio.c     |   9 ++-
 sound/pci/emu10k1/emu10k1x.c        |  10 +++-
 sound/pci/ens1370.c                 |  10 +++-
 sound/pci/es1938.c                  |  10 +++-
 sound/pci/es1968.c                  |  10 +++-
 sound/pci/fm801.c                   |  10 +++-
 sound/pci/hda/patch_realtek.c       |   2 +
 sound/pci/ice1712/ice1724.c         |  10 +++-
 sound/pci/intel8x0.c                |  10 +++-
 sound/pci/intel8x0m.c               |  10 +++-
 sound/pci/korg1212/korg1212.c       |   8 ++-
 sound/pci/lola/lola.c               |  10 +++-
 sound/pci/lx6464es/lx6464es.c       |   8 ++-
 sound/pci/maestro3.c                |   8 ++-
 sound/pci/nm256/nm256.c             |   2 +-
 sound/pci/oxygen/oxygen_lib.c       |  12 +++-
 sound/pci/riptide/riptide.c         |   8 ++-
 sound/pci/rme32.c                   |   8 ++-
 sound/pci/rme96.c                   |  10 +++-
 sound/pci/rme9652/hdsp.c            |   8 ++-
 sound/pci/rme9652/hdspm.c           |   8 ++-
 sound/pci/rme9652/rme9652.c         |   8 ++-
 sound/pci/sis7019.c                 |  14 +++--
 sound/pci/sonicvibes.c              |  10 +++-
 sound/pci/via82xx.c                 |  10 +++-
 sound/pci/via82xx_modem.c           |  10 +++-
 sound/usb/pcm.c                     |  16 +++++-
 sound/usb/usbaudio.h                |   2 +-
 sound/x86/intel_hdmi_audio.c        |   7 ++-
 55 files changed, 506 insertions(+), 124 deletions(-)

