Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id F28925595D9
	for <lists+linux-kernel@lfdr.de>; Fri, 24 Jun 2022 10:55:27 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S230257AbiFXIwt (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Fri, 24 Jun 2022 04:52:49 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:41044 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229828AbiFXIwq (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 24 Jun 2022 04:52:46 -0400
Received: from eu-smtp-delivery-151.mimecast.com (eu-smtp-delivery-151.mimecast.com [185.58.86.151])
        by lindbergh.monkeyblade.net (Postfix) with ESMTP id 922FC6E7AA
        for <linux-kernel@vger.kernel.org>; Fri, 24 Jun 2022 01:52:45 -0700 (PDT)
Received: from AcuMS.aculab.com (156.67.243.121 [156.67.243.121]) by
 relay.mimecast.com with ESMTP with STARTTLS (version=TLSv1.2,
 cipher=TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384) id
 uk-mta-231-KSvsTvnlPKW3xPUwAvk1KQ-1; Fri, 24 Jun 2022 09:52:42 +0100
X-MC-Unique: KSvsTvnlPKW3xPUwAvk1KQ-1
Received: from AcuMS.Aculab.com (fd9f:af1c:a25b:0:994c:f5c2:35d6:9b65) by
 AcuMS.aculab.com (fd9f:af1c:a25b:0:994c:f5c2:35d6:9b65) with Microsoft SMTP
 Server (TLS) id 15.0.1497.36; Fri, 24 Jun 2022 09:52:40 +0100
Received: from AcuMS.Aculab.com ([fe80::994c:f5c2:35d6:9b65]) by
 AcuMS.aculab.com ([fe80::994c:f5c2:35d6:9b65%12]) with mapi id
 15.00.1497.036; Fri, 24 Jun 2022 09:52:40 +0100
From:   David Laight <David.Laight@ACULAB.COM>
To:     'Christoph Muellner' <christoph.muellner@vrull.eu>,
        "linux-riscv@lists.infradead.org" <linux-riscv@lists.infradead.org>,
        "linux-kernel@vger.kernel.org" <linux-kernel@vger.kernel.org>,
        Palmer Dabbelt <palmer@dabbelt.com>,
        Paul Walmsley <paul.walmsley@sifive.com>,
        Albert Ou <aou@eecs.berkeley.edu>,
        Philipp Tomsich <philipp.tomsich@vrull.eu>,
        =?utf-8?B?SGVpa28gU3TDvGJuZXI=?= <heiko.stuebner@vrull.eu>,
        Aaron Durbin <adurbin@rivosinc.com>,
        Heiko Stuebner <heiko@sntech.de>,
        Randy Dunlap <rdunlap@infradead.org>,
        Atish Patra <atishp@atishpatra.org>
Subject: RE: [RFC PATCH v2] riscv: Add Zawrs support for spinlocks
Thread-Topic: [RFC PATCH v2] riscv: Add Zawrs support for spinlocks
Thread-Index: AQHYhxYZP1XU+ojAHEi3udpMbWid561ePC4g
Date:   Fri, 24 Jun 2022 08:52:40 +0000
Message-ID: <f04bd42eb93b4c4dbece34236a7b994b@AcuMS.aculab.com>
References: <20220623152948.1607295-1-christoph.muellner@vrull.eu>
In-Reply-To: <20220623152948.1607295-1-christoph.muellner@vrull.eu>
Accept-Language: en-GB, en-US
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
x-ms-exchange-transport-fromentityheader: Hosted
x-originating-ip: [10.202.205.107]
MIME-Version: 1.0
Authentication-Results: relay.mimecast.com;
        auth=pass smtp.auth=C51A453 smtp.mailfrom=david.laight@aculab.com
X-Mimecast-Spam-Score: 0
X-Mimecast-Originator: aculab.com
Content-Language: en-US
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
X-Spam-Status: No, score=-1.9 required=5.0 tests=BAYES_00,SPF_HELO_NONE,
        SPF_PASS,T_SCC_BODY_TEXT_LINE autolearn=ham autolearn_force=no
        version=3.4.6
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

RnJvbTogQ2hyaXN0b3BoIE11ZWxsbmVyDQo+IFNlbnQ6IDIzIEp1bmUgMjAyMiAxNjozMA0KPiAN
Cj4gRnJvbTogQ2hyaXN0b3BoIE3DvGxsbmVyIDxjaHJpc3RvcGgubXVlbGxuZXJAdnJ1bGwuZXU+
DQo+IA0KPiBUaGUgY3VycmVudCBSSVNDLVYgY29kZSB1c2VzIHRoZSBnZW5lcmljIHRpY2tldCBs
b2NrIGltcGxlbWVudGF0aW9uLA0KPiB0aGF0IGNhbGxzIHRoZSBtYWNyb3Mgc21wX2NvbmRfbG9h
ZF9yZWxheGVkKCkgYW5kIHNtcF9jb25kX2xvYWRfYWNxdWlyZSgpLg0KPiBDdXJyZW50bHksIFJJ
U0MtViB1c2VzIHRoZSBnZW5lcmljIGltcGxlbWVudGF0aW9uIG9mIHRoZXNlIG1hY3Jvcy4NCj4g
VGhpcyBwYXRjaCBpbnRyb2R1Y2VzIGEgUklTQy1WIHNwZWNpZmljIGltcGxlbWVudGF0aW9uLCBv
ZiB0aGVzZQ0KPiBtYWNyb3MsIHRoYXQgcGVlbHMgb2ZmIHRoZSBmaXJzdCBsb29wIGl0ZXJhdGlv
biBhbmQgbW9kaWZpZXMgdGhlIHdhaXRpbmcNCj4gbG9vcCBzdWNoLCB0aGF0IGl0IGlzIHBvc3Np
YmxlIHRvIHVzZSB0aGUgV1JTLlNUTyBpbnN0cnVjdGlvbiBvZiB0aGUgWmF3cnMNCj4gSVNBIGV4
dGVuc2lvbiB0byBzdGFsbCB0aGUgQ1BVLg0KPiANCj4gVGhlIHJlc3VsdGluZyBpbXBsZW1lbnRh
dGlvbiBvZiBzbXBfY29uZF9sb2FkXyooKSB3aWxsIG9ubHkgd29yayBmb3INCj4gMzItYml0IG9y
IDY0LWJpdCB0eXBlcyBmb3IgUlY2NCBhbmQgMzItYml0IHR5cGVzIGZvciBSVjMyLg0KPiBUaGlz
IGlzIGNhdXNlZCBieSB0aGUgcmVzdHJpY3Rpb25zIG9mIHRoZSBMUiBpbnN0cnVjdGlvbiAoUklT
Qy1WIG9ubHkNCj4gaGFzIExSLlcgYW5kIExSLkQpLiBDb21waWxlciBhc3NlcnRpb25zIGd1YXJk
IHRoaXMgbmV3IHJlc3RyaWN0aW9uLg0KPiANCj4gVGhpcyBwYXRjaCB1c2VzIHRoZSBleGlzdGlu
ZyBSSVNDLVYgSVNBIGV4dGVuc2lvbiBmcmFtZXdvcmsNCj4gdG8gZGV0ZWN0IHRoZSBwcmVzZW50
cyBvZiBaYXdycyBhdCBydW4tdGltZS4NCj4gSWYgYXZhaWxhYmxlIGEgTk9QIGluc3RydWN0aW9u
IHdpbGwgYmUgcmVwbGFjZWQgYnkgV1JTLk5UTyBvciBXUlMuU1RPLg0KPiANCj4gVGhlIHdob2xl
IG1lY2hhbmlzbSBpcyBnYXRlZCBieSBLY29uZmlnIHNldHRpbmcsIHdoaWNoIGRlZmF1bHRzIHRv
IFkuDQo+IA0KPiBUaGUgWmF3cnMgc3BlY2lmaWNhdGlvbiBjYW4gYmUgZm91bmQgaGVyZToNCj4g
aHR0cHM6Ly9naXRodWIuY29tL3Jpc2N2L3Jpc2N2LXphd3JzL2Jsb2IvbWFpbi96YXdycy5hZG9j
DQo+IA0KPiBOb3RlLCB0aGF0IHRoZSBaYXdycyBleHRlbnNpb24gaXMgbm90IGZyb3plbiBvciBy
YXRpZmllZCB5ZXQuDQo+IFRoZXJlZm9yZSB0aGlzIHBhdGNoIGlzIGFuIFJGQyBhbmQgbm90IGlu
dGVuZGVkIHRvIGdldCBtZXJnZWQuDQo+IA0KPiBDaGFuZ2VzIHNpbmNlIHYxOg0KPiAqIEFkZGlu
ZyAiZGVwZW5kcyBvbiAhWElQX0tFUk5FTCIgdG8gUklTQ1ZfSVNBX1pBV1JTDQo+ICogRml4aW5n
IHR5cGUgY2hlY2tpbmcgY29kZSBpbiBfX3NtcF9sb2FkX3Jlc2VydmVkKg0KPiAqIEFkanVzdG1l
bnRzIGFjY29yZGluZyB0byB0aGUgc3BlY2lmaWNhdGlvbiBjaGFuZ2UNCj4gDQo+IFNpZ25lZC1v
ZmYtYnk6IENocmlzdG9waCBNw7xsbG5lciA8Y2hyaXN0b3BoLm11ZWxsbmVyQHZydWxsLmV1Pg0K
PiAtLS0NCj4gIGFyY2gvcmlzY3YvS2NvbmZpZyAgICAgICAgICAgICAgICAgICB8IDExICsrKysN
Cj4gIGFyY2gvcmlzY3YvaW5jbHVkZS9hc20vYmFycmllci5oICAgICB8IDkyICsrKysrKysrKysr
KysrKysrKysrKysrKysrKysNCj4gIGFyY2gvcmlzY3YvaW5jbHVkZS9hc20vZXJyYXRhX2xpc3Qu
aCB8IDE5ICsrKysrLQ0KPiAgYXJjaC9yaXNjdi9pbmNsdWRlL2FzbS9od2NhcC5oICAgICAgIHwg
IDMgKy0NCj4gIGFyY2gvcmlzY3Yva2VybmVsL2NwdS5jICAgICAgICAgICAgICB8ICAxICsNCj4g
IGFyY2gvcmlzY3Yva2VybmVsL2NwdWZlYXR1cmUuYyAgICAgICB8IDEzICsrKysNCj4gIDYgZmls
ZXMgY2hhbmdlZCwgMTM2IGluc2VydGlvbnMoKyksIDMgZGVsZXRpb25zKC0pDQo+IA0KPiBkaWZm
IC0tZ2l0IGEvYXJjaC9yaXNjdi9LY29uZmlnIGIvYXJjaC9yaXNjdi9LY29uZmlnDQo+IGluZGV4
IDMyZmZlZjlmNmU1Yi4uOWQ0MDU2OTIzN2M5IDEwMDY0NA0KPiAtLS0gYS9hcmNoL3Jpc2N2L0tj
b25maWcNCj4gKysrIGIvYXJjaC9yaXNjdi9LY29uZmlnDQo+IEBAIC0zNTgsNiArMzU4LDE3IEBA
IGNvbmZpZyBSSVNDVl9JU0FfQw0KPiANCj4gIAkgICBJZiB5b3UgZG9uJ3Qga25vdyB3aGF0IHRv
IGRvIGhlcmUsIHNheSBZLg0KPiANCj4gK2NvbmZpZyBSSVNDVl9JU0FfWkFXUlMNCj4gKwlib29s
ICJaYXdycyBleHRlbnNpb24gc3VwcG9ydCINCj4gKwlkZXBlbmRzIG9uICFYSVBfS0VSTkVMDQo+
ICsJc2VsZWN0IFJJU0NWX0FMVEVSTkFUSVZFDQo+ICsJZGVmYXVsdCB5DQo+ICsJaGVscA0KPiAr
CSAgIEFkZHMgc3VwcG9ydCB0byBkeW5hbWljYWxseSBkZXRlY3QgdGhlIHByZXNlbmNlIG9mIHRo
ZSBaYXdycyBleHRlbnNpb24NCj4gKwkgICAod2FpdCBmb3IgcmVzZXJ2YXRpb24gc2V0KSBhbmQg
ZW5hYmxlIGl0cyB1c2FnZS4NCj4gKw0KPiArCSAgIElmIHlvdSBkb24ndCBrbm93IHdoYXQgdG8g
ZG8gaGVyZSwgc2F5IFkuDQo+ICsNCj4gIGNvbmZpZyBSSVNDVl9JU0FfU1ZQQk1UDQo+ICAJYm9v
bCAiU1ZQQk1UIGV4dGVuc2lvbiBzdXBwb3J0Ig0KPiAgCWRlcGVuZHMgb24gNjRCSVQgJiYgTU1V
DQo+IGRpZmYgLS1naXQgYS9hcmNoL3Jpc2N2L2luY2x1ZGUvYXNtL2JhcnJpZXIuaCBiL2FyY2gv
cmlzY3YvaW5jbHVkZS9hc20vYmFycmllci5oDQo+IGluZGV4IGQwZTI0YWFhMmFhMC4uMWY5NjI4
YWFhN2NiIDEwMDY0NA0KPiAtLS0gYS9hcmNoL3Jpc2N2L2luY2x1ZGUvYXNtL2JhcnJpZXIuaA0K
PiArKysgYi9hcmNoL3Jpc2N2L2luY2x1ZGUvYXNtL2JhcnJpZXIuaA0KPiBAQCAtMTIsNiArMTIs
OCBAQA0KPiANCj4gICNpZm5kZWYgX19BU1NFTUJMWV9fDQo+IA0KPiArI2luY2x1ZGUgPGFzbS9l
cnJhdGFfbGlzdC5oPg0KPiArDQo+ICAjZGVmaW5lIG5vcCgpCQlfX2FzbV9fIF9fdm9sYXRpbGVf
XyAoIm5vcCIpDQo+IA0KPiAgI2RlZmluZSBSSVNDVl9GRU5DRShwLCBzKSBcDQo+IEBAIC00Miw2
ICs0NCw2NCBAQCBkbyB7CQkJCQkJCQkJXA0KPiAgCV9fX3AxOwkJCQkJCQkJXA0KPiAgfSkNCj4g
DQo+ICsjaWYgX19yaXNjdl94bGVuID09IDY0DQo+ICsNCj4gKyNkZWZpbmUgX19yaXNjdl9scnNj
X3dvcmQodCkJCQkJCQlcDQo+ICsJKHNpemVvZih0KSA9PSBzaXplb2YoaW50KSB8fAkJCQkJXA0K
PiArCSBzaXplb2YodCkgPT0gc2l6ZW9mKGxvbmcpKQ0KDQpUaGF0IGxpbmUgZG9lc24ndCBuZWVk
IHNwbGl0dGluZy4NCg0KPiArI2VsaWYgX19yaXNjdl94bGVuID09IDMyDQo+ICsNCj4gKyNkZWZp
bmUgX19yaXNjdl9scnNjX3dvcmQodCkJCQkJCQlcDQo+ICsJKHNpemVvZih0KSA9PSBzaXplb2Yo
aW50KSkNCg0KQ2FuJ3QgeW91IHVzZSB0aGUgc2FtZSB0ZXN0IGFzIDY0Yml0Pw0KQm90aCBpbnQg
YW5kIGxvbmcgd2F2ZSBzaXplIDQgLSBzbyB0aGUgdGVzdCBpcyBmaW5lLg0KDQo+ICsNCj4gKyNl
bHNlDQo+ICsjZXJyb3IgIlVuZXhwZWN0ZWQgX19yaXNjdl94bGVuIg0KPiArI2VuZGlmIC8qIF9f
cmlzY3ZfeGxlbiAqLw0KPiArDQo+ICsjZGVmaW5lIGNvbXBpbGV0aW1lX2Fzc2VydF9hdG9taWNf
bHJzY190eXBlKHQpCQkJCVwNCj4gKwljb21waWxldGltZV9hc3NlcnQoX19yaXNjdl9scnNjX3dv
cmQodCksCQkJXA0KPiArCQkiTmVlZCB0eXBlIGNvbXBhdGlibGUgd2l0aCBMUi9TQyBpbnN0cnVj
dGlvbnMuIikNCg0KSSB0aGluayBJJ2QgdHJ5IHRvIGdldCB0aGUgdHlwZSBuYW1lIGludG8gdGhl
IGVycm9yIG1lc3NhZ2UuDQpFaXRoZXIgIyN0IG9yIFNUUih0KSBzaG91bGQgYmUgcmlnaHQuDQoN
Cj4gKw0KPiArI2RlZmluZSBfX19zbXBfbG9hZF9yZXNlcnZlZE4ocGZ4LCBwdHIpCQkJCQlcDQo+
ICsoewkJCQkJCQkJCVwNCj4gKwl0eXBlb2YoKnB0cikgX19fcDE7CQkJCQkJXA0KPiArCV9fYXNt
X18gX192b2xhdGlsZV9fICgibHIuIiBwZnggIgklW3BdLCAlW2NdXG4iCQlcDQo+ICsJCQkgICAg
ICA6IFtwXSI9JnIiIChfX19wMSksIFtjXSIrQSIoKnB0cikpOwlcDQo+ICsJX19fcDE7CQkJCQkJ
CQlcDQo+ICt9KQ0KDQpJc24ndCB0aGF0IG1pc3NpbmcgdGhlIG1lbW9yeSByZWZlcmVuY2U/DQpJ
dCBlaXRoZXIgbmVlZHMgYSBleHRyYSBtZW1vcnkgcGFyYW1ldGVyIGZvciAncHRyJyBvcg0KYSBm
dWxsL3BhcnRpYWwgbWVtb3J5IGNsb2JiZXIuDQoNCj4gKw0KPiArI2RlZmluZSBfX19zbXBfbG9h
ZF9yZXNlcnZlZDMyKHB0cikJCQkJCVwNCj4gKwlfX19zbXBfbG9hZF9yZXNlcnZlZE4oInciLCBw
dHIpDQo+ICsNCj4gKyNkZWZpbmUgX19fc21wX2xvYWRfcmVzZXJ2ZWQ2NChwdHIpCQkJCQlcDQo+
ICsJX19fc21wX2xvYWRfcmVzZXJ2ZWROKCJkIiwgcHRyKQ0KPiArDQo+ICsjZGVmaW5lIF9fc21w
X2xvYWRfcmVzZXJ2ZWRfcmVsYXhlZChwdHIpCQkJCVwNCj4gKyh7CQkJCQkJCQkJXA0KPiArCXR5
cGVvZigqcHRyKSBfX19wMTsJCQkJCQlcDQo+ICsJY29tcGlsZXRpbWVfYXNzZXJ0X2F0b21pY19s
cnNjX3R5cGUoKnB0cik7CQkJXA0KPiArCWlmIChzaXplb2YoKnB0cikgPT0gNCkgewkJCQkJXA0K
PiArCQlfX19wMSA9IF9fX3NtcF9sb2FkX3Jlc2VydmVkMzIocHRyKTsJCQlcDQo+ICsJfSBlbHNl
IHsJCQkJCQkJXA0KPiArCQlfX19wMSA9IF9fX3NtcF9sb2FkX3Jlc2VydmVkNjQocHRyKTsJCQlc
DQo+ICsJfQkJCQkJCQkJXA0KDQpJIHRoaW5rIHJlcGxhY2luZyBhbGwgdGhhdCB3aXRoOg0KCXR5
cGVvZigqcHRyKSBfX19wMTsgXA0KCWlmIChzaXplb2YoKnB0cikgPT0gc2l6ZW9mKGludCkpIFwN
CgkJX19fcDEgPSBfX19zbXBfbG9hZF9yZXNlcnZlZE4oInciLCBwdHIpOyBcDQoJZWxzZSAJaWYg
KHNpemVvZigqcHRyKSA9PSBzaXplb2YobG9uZykpIFwNCgkJX19fcDEgPSBfX19zbXBfbG9hZF9y
ZXNlcnZlZE4oImQiLCBwdHIpOyBcDQoJZWxzZQ0KCQljb21waWxldGltZV9hc3NlcnQoMSwJCQlc
DQoJCQkiTmVlZCB0eXBlIGNvbXBhdGlibGUgd2l0aCBMUi9TQyBpbnN0cnVjdGlvbnMuIik7DQoN
Ck1pZ2h0IG1ha2UgaXQgZWFzaWVyIHRvIHJlYWQuDQoNCj4gKwlfX19wMTsJCQkJCQkJCVwNCj4g
K30pDQo+ICsNCj4gKyNkZWZpbmUgX19zbXBfbG9hZF9yZXNlcnZlZF9hY3F1aXJlKHB0cikJCQkJ
XA0KPiArKHsJCQkJCQkJCQlcDQo+ICsJdHlwZW9mKCpwdHIpIF9fX3AxOwkJCQkJCVwNCj4gKwlj
b21waWxldGltZV9hc3NlcnRfYXRvbWljX2xyc2NfdHlwZSgqcHRyKTsJCQlcDQo+ICsJaWYgKHNp
emVvZigqcHRyKSA9PSA0KSB7CQkJCQlcDQo+ICsJCV9fX3AxID0gX19fc21wX2xvYWRfcmVzZXJ2
ZWQzMihwdHIpOwkJCVwNCj4gKwl9IGVsc2UgewkJCQkJCQlcDQo+ICsJCV9fX3AxID0gX19fc21w
X2xvYWRfcmVzZXJ2ZWQ2NChwdHIpOwkJCVwNCj4gKwl9CQkJCQkJCQlcDQoNCklzbid0IHRoYXQg
aWRlbnRpY2FsIHRvIF9fc21wX2xvYWRfcmVzZXJ2ZWRfcmVsYXhlZCgpPw0KTm8gcG9pbnQgcmVw
bGljYXRpbmcgaXQuDQouLi4NCg0KCURhdmlkDQoNCi0NClJlZ2lzdGVyZWQgQWRkcmVzcyBMYWtl
c2lkZSwgQnJhbWxleSBSb2FkLCBNb3VudCBGYXJtLCBNaWx0b24gS2V5bmVzLCBNSzEgMVBULCBV
Sw0KUmVnaXN0cmF0aW9uIE5vOiAxMzk3Mzg2IChXYWxlcykNCg==

